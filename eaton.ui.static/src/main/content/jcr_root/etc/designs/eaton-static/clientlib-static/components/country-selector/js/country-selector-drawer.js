/**
 *
 *
 *
 *
 *
 * - THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY - 
 *
 * - Generated by Gulp (gulp-babel).
 *
 *
 *
 *
 *
 */


//-----------------------------------
// Component M-3: Header Module
// Country Language Selector
//-----------------------------------
'use strict';

var App = window.App || {};

App.countrySelector = function () {

  // Variable Declarations
  var componentClass = '.country-selector-drawer';
  var componentEl = $(componentClass);
  var bodyEl = $('body');
  var regionDesktopLinks = componentEl.find('.country-selector-drawer__region-list a');
  var closeDrawerBtn = componentEl.find('.country-selector-drawer__close-menu');
  // Check AEM Author Mode
  var isAEMAuthorMode = App.global.utils.isAEMAuthorMode();

  /**
  * Init
  */
  var init = function init() {
    // If not in AEM Author Mode - initialize scripts
    if (!isAEMAuthorMode) {
      addEventListeners();
    }
  };

  /**
  * Handle click on region links. Show/ Hide panels
  */
  var handleRegionPanels = function handleRegionPanels(event) {
    var activeLink = $(event.currentTarget);

    event.preventDefault();
    if (activeLink.hasClass('active')) {
      return false;
    }

    // Highlight only the active Link
    regionDesktopLinks.removeClass('active');
    regionDesktopLinks.attr('aria-expanded', false);
    $('.panel-collapse').removeClass('in');

    if (!activeLink.hasClass('active')) {
      activeLink.addClass('active');
      activeLink.attr('aria-expanded', true);
    }
  };

  var closeDrawer = function closeDrawer(event) {
    // Close the drawer if open - Country Selector
    bodyEl.removeClass('drawer-open');
  };

  /**
   * Bind All Event Listeners
   */
  var addEventListeners = function addEventListeners() {

    // Handle Mega Menu Behaviors - Open Mega-Menu
    regionDesktopLinks.on('click', handleRegionPanels);

    // Handle Mega Menu Behaviors - Close Mega-Menu (Desktop)
    closeDrawerBtn.on('click', closeDrawer);
  };

  /**
  * If containing DOM element is found, Initialize and Expose public methods
  */
  if (componentEl.length > 0) {
    init();
  }
}();